<!doctype html><html lang=en><head><meta charset=utf-8><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content="light dark" name=color-scheme><title>Converting Images to 3D Models</title><meta content="<p>I made a simple web-based tool for converting greyscale images to 3D models.</p>
" name=description><link href=/img/favicon-32x32.png rel=icon sizes=32x32 type=image/png><link href=/img/favicon-16x16.png rel=icon sizes=16x16 type=image/png><link href=/img/apple-touch-icon.png rel=apple-touch-icon sizes=180x180><link href=https://fonts.googleapis.com rel=preconnect><link crossorigin href=https://fonts.gstatic.com rel=preconnect><link href="https://fonts.googleapis.com/css2?family=Alegreya&display=swap" rel=stylesheet><link href=/css/main.css rel=stylesheet><link href=/hl-light.css id=hl rel=stylesheet><link crossorigin href=https://cdn.jsdelivr.net/npm/katex@0.16.7/dist/katex.min.css integrity=sha384-3UiQGuEI4TTMaFmGIZumfRPtfKQ3trwQE2JgosJxCnGmQpL/lJdjpcHkaaFwHlcI rel=stylesheet><script crossorigin defer integrity=sha384-G0zcxDFp5LWZtDuRMnBkk3EphCK1lhEf4UEyEM693ka574TZGwo4IWwS6QLzM/2t src=https://cdn.jsdelivr.net/npm/katex@0.16.7/dist/katex.min.js></script><script crossorigin defer integrity=sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05 src=https://cdn.jsdelivr.net/npm/katex@0.16.7/dist/contrib/auto-render.min.js></script><script>document.addEventListener('DOMContentLoaded',function(){renderMathInElement(document.body,{delimiters:[{left:'$$',right:'$$',display:true},{left:'$',right:'$',display:false},{left:'\\(',right:'\\)',display:false},{left:'\\[',right:'\\]',display:true}],throwOnError:false})})</script><body class=post><script>if(localStorage.getItem('theme')=='dark'){document.body.classList.add('dark');const a=document.querySelector('link#hl');if(a)a.href='/hl-dark.css'}</script><header class=blur><div id=wrapper><nav><a href=/>edibotopic</a><span class=separator>::</span><a href=/blog>blog</a></nav><div id=btns><a aria-label="rss feed" href=/blog/feed.xml><svg viewbox="0 0 24 24" height=24 width=24 xmlns=http://www.w3.org/2000/svg><path d="M3 17C5.20914 17 7 18.7909 7 21H3V17ZM3 10C9.07513 10 14 14.9249 14 21H12C12 16.0294 7.97056 12 3 12V10ZM3 3C12.9411 3 21 11.0589 21 21H19C19 12.1634 11.8366 5 3 5V3Z" fill=currentColor></path></svg></a><button aria-label="theme switch" data-moon-icon='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><path d="M10 7C10 10.866 13.134 14 17 14C18.9584 14 20.729 13.1957 21.9995 11.8995C22 11.933 22 11.9665 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C12.0335 2 12.067 2 12.1005 2.00049C10.8043 3.27098 10 5.04157 10 7ZM4 12C4 16.4183 7.58172 20 12 20C15.0583 20 17.7158 18.2839 19.062 15.7621C18.3945 15.9187 17.7035 16 17 16C12.0294 16 8 11.9706 8 7C8 6.29648 8.08133 5.60547 8.2379 4.938C5.71611 6.28423 4 8.9417 4 12Z" fill="currentColor"></path></svg>' data-sun-icon='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><path d="M12 18C8.68629 18 6 15.3137 6 12C6 8.68629 8.68629 6 12 6C15.3137 6 18 8.68629 18 12C18 15.3137 15.3137 18 12 18ZM12 16C14.2091 16 16 14.2091 16 12C16 9.79086 14.2091 8 12 8C9.79086 8 8 9.79086 8 12C8 14.2091 9.79086 16 12 16ZM11 1H13V4H11V1ZM11 20H13V23H11V20ZM3.51472 4.92893L4.92893 3.51472L7.05025 5.63604L5.63604 7.05025L3.51472 4.92893ZM16.9497 18.364L18.364 16.9497L20.4853 19.0711L19.0711 20.4853L16.9497 18.364ZM19.0711 3.51472L20.4853 4.92893L18.364 7.05025L16.9497 5.63604L19.0711 3.51472ZM5.63604 16.9497L7.05025 18.364L4.92893 20.4853L3.51472 19.0711L5.63604 16.9497ZM23 11V13H20V11H23ZM4 11V13H1V11H4Z" fill="currentColor"></path></svg>' id=theme-toggle><svg viewbox="0 0 24 24" height=24 width=24 xmlns=http://www.w3.org/2000/svg><path d="M10 7C10 10.866 13.134 14 17 14C18.9584 14 20.729 13.1957 21.9995 11.8995C22 11.933 22 11.9665 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C12.0335 2 12.067 2 12.1005 2.00049C10.8043 3.27098 10 5.04157 10 7ZM4 12C4 16.4183 7.58172 20 12 20C15.0583 20 17.7158 18.2839 19.062 15.7621C18.3945 15.9187 17.7035 16 17 16C12.0294 16 8 11.9706 8 7C8 6.29648 8.08133 5.60547 8.2379 4.938C5.71611 6.28423 4 8.9417 4 12Z" fill=currentColor></path></svg></button><button aria-label="table of content" id=toc-toggle><svg viewbox="0 0 24 24" height=24 width=24 xmlns=http://www.w3.org/2000/svg><path d="M3 4H21V6H3V4ZM3 11H15V13H3V11ZM3 18H21V20H3V18Z" fill=currentColor></path></svg></button></div></div></header><div id=post-wrapper><div id=blank></div><main><article data-backlink-icon='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="20" height="20"><path d="M9.41421 8L18.0208 16.6066L16.6066 18.0208L8 9.41421V17H6V6H17V8H9.41421Z" fill="currentColor"></path></svg>' class=prose><h1>Converting Images to 3D Models</h1><div id=post-info><div id=date><span id=publish>2023-06-12</span></div><div id=tags><a href=https://edibotopic.com/tags/3d># 3D</a><a href=https://edibotopic.com/tags/programming># programming</a><a href=https://edibotopic.com/tags/modelling># modelling</a><a href=https://edibotopic.com/tags/learning># learning</a></div></div><p>I made a simple web-based tool for converting greyscale images to 3D models.</p><span id=continue-reading></span><p>Far more powerful software than this tool — <em>WriteHeight</em> — exists but their complexity often presents a significant barrier to newcomers. Based solely on heightmaps, WriteHeight only requires the user to upload or draw greyscale images. The 2D image is then converted into a 3D model that can be inspected or downloaded. This post explains the motivation behind WriteHeight, what it can do and why it still needs a lot of work.<p>Play around with <a rel="nofollow noreferrer" href=https://edibotopic.github.io/write-height/>WriteHeight</a> or <a rel="nofollow noreferrer" href=https://github.com/edibotopic/write-height>read the source code</a>.<h2 id=making-3d-easier>Making 3D Easier<a aria-label="Anchor link for: making-3d-easier" class=zola-anchor href=#making-3d-easier>#</a></h2><p>While not everyone self-identifies as an artist people still draw in a variety of contexts. I work mostly with scientists who — while not usually artistically-trained — routinely produce drawings in the form of flow diagrams and graphical abstracts. Whether generated on paper or on a screen, these drawings are an important method of thinking through our ideas and communicating them to others. Concepts can also be represented in 3D, but this traditionally requires a mastery of techniques like shading and perspective. Today, powerful (and free) software like <a href=https://edibotopic.com/blog/doing/write-height/www.blender.com>Blender</a> allows the direct manipulation of models in 3D space, and there is an endless supply of online learning resources to get people started.<p>My initial forays into 3D were prompted by online teaching. The difficulty in the remote delivery of STEM content lies more with the laboratory practicals than the lectures, and I wanted to learn how to make interactive 3D versions of these labs. At the same time, I was involved in research projects on the 3D printing of food. Whether in the context of teaching or research, I found that scientists were reluctant to engage with 3D modelling. Research papers on topics like 3D food printing often give minimal attention to the design of a given model or the specific purpose of its structure. The apparent discomfort with 3D design is perhaps unsurprising, given that the transition from 2D to 3D introduces marked complexity. A 3D scene can require the management of new kinds of elements — like cameras and lights — that are not required when making a 2D image. Well-constructed scenes can look ugly if the lighting is wrong. A model may not render or print correctly if the topology is flawed. There are different paradigms of modelling, including the direct modelling approach favoured by digital artists and the parametric approach used by mechanical engineers. Blender is also a hybrid application — combining (at a minimum) a 3D modeller, animation suite, video editor and compositor — and this vast range of functionality is evident in its interface. Despite all these complexities, much can be learned about 3D modelling from adept teenagers with small YouTube channels.<p><img alt="UI of WriteHeight" title="UI of WriteHeight" src=/figs/writeHeightUI.webp> <em>User interface of WriteHeight showing the 2D heightmap (top-left, inset) and the resultant 3D mesh (main).</em><p>For me, one of the most intuitive paths for transitioning from drawing in 2D to modelling in 3D is the <strong>heightmap</strong>. While this approach has its limitations, I think it is a good entry-point to 3D that can produce interesting results. A heightmap is simply a 2D greyscale image, with an x- and a y-axis. The relative lightness of pixels in that 2D image can be converted to vertex heights in a 3D model, yielding the third z-axis. Black pixels become the lowest regions in the model and white pixels the highest regions.<h2 id=existing-software>Existing Software<a aria-label="Anchor link for: existing-software" class=zola-anchor href=#existing-software>#</a></h2><p>Most software with 3D capabilities, including dedicated modellers like Blender and game engines like <a rel="nofollow noreferrer" href=https://unity.com/>Unity</a>, can generate models from heightmaps; however, if this is all that you want to achieve they are probably overkill.<p>A separate application is usually required to make the greyscale image that will be transformed into a 3D model. There are dedicated applications for generating heightmaps from real terrain elevation data, such as <a rel="nofollow noreferrer" href=https://tangrams.github.io/heightmapper/>Tangram Heightmapper</a>. Another approach is that of <a rel="nofollow noreferrer" href=https://archive.org/details/jsplacement-1.3.0-allplatforms_202108>JSplacement</a>, which generates random heightmaps from <em>greebles</em>, smaller greyscale parts that are arranged and combined into larger heightmaps. With a modern digital drawing app like <a rel="nofollow noreferrer" href=https://krita.org/en/>Krita</a> the range of possible heightmaps is only limited by your skill and imagination.<p>Ephtracy's <a href="https://ephtracy.github.io/index.html?page=aerialod" rel="nofollow noreferrer">Aerialod</a> is dedicated to the specific task of rendering 3D models from heightmaps and comes with a range of options to generate beautiful renders. Most of my initial heightmap experimentation started with Aerialod, due to its elegance and simplicity. However, I am now a Linux-user and at time-of-writing Aerialod is only available as a Windows-only download.<p>For my purposes, I wanted something that was:<ol><li>Dedicated to making 3D models from heightmaps<li>Accessible on any device (computer, tablet, phone)<li>Useable in a browser with no app download required</ol><h2 id=writeheight>WriteHeight<a aria-label="Anchor link for: writeheight" class=zola-anchor href=#writeheight>#</a></h2><p>As an application WriteHeight is simple. It opens with a viewport showing a random 3D model, which can be inspected using mouse, touch or arrow keys. The corresponding 2D image from which the model was generated is shown inset. The 3D model is rendered using the <a rel="nofollow noreferrer" href=https://www.babylonjs.com/>babylon.js</a> game engine. Buttons are included below the viewport, one allows for the generation of further random models from a finite collection. Another allows a user to upload their own heightmap image, which will then be rendered into an inspectable 3D model. Models can then be downloaded in different formats, including <code>.stl</code> (good for 3D printing) and <code>.glb</code> (good for 3D rendering).<blockquote class="callout warning"><div class=icon><svg viewbox="0 0 24 24" height=20 width=20 xmlns=http://www.w3.org/2000/svg><path d="M12.865 3.00017L22.3912 19.5002C22.6674 19.9785 22.5035 20.5901 22.0252 20.8662C21.8732 20.954 21.7008 21.0002 21.5252 21.0002H2.47266C1.92037 21.0002 1.47266 20.5525 1.47266 20.0002C1.47266 19.8246 1.51886 19.6522 1.60663 19.5002L11.1329 3.00017C11.4091 2.52187 12.0206 2.358 12.4989 2.63414C12.651 2.72191 12.7772 2.84815 12.865 3.00017ZM4.20471 19.0002H19.7932L11.9989 5.50017L4.20471 19.0002ZM10.9989 16.0002H12.9989V18.0002H10.9989V16.0002ZM10.9989 9.00017H12.9989V14.0002H10.9989V9.00017Z" fill=currentColor></path></svg></div><div class=content><p><strong>Warning</strong><p>The drawing tools described below are deprecated as of <code>v0.1.2</code>.</div></blockquote><p>For convenience, two <em>very basic</em> tools are provided with WriteHeight to generate and download heightmaps. Clicking the <code>pencil</code> button opens a greyscale drawing tool — this reflects the initial goal of <strong>Write</strong>Height, which was to <em>write</em> heightmaps that could be converted into 3D. Clicking the <code>walking</code> button opens a random walk visualisation that algorithmically generates a greyscale image — this reflects an ambition for WriteHeight to (eventually) offer a set of simple algorithms for the procedural design of 3D models.<h2 id=fixing-downloads-bug-v0-1-2>Fixing Downloads Bug (v0.1.2)<a aria-label="Anchor link for: fixing-downloads-bug-v0-1-2" class=zola-anchor href=#fixing-downloads-bug-v0-1-2>#</a></h2><blockquote class="callout note"><div class=icon><svg viewbox="0 0 24 24" height=20 width=20 xmlns=http://www.w3.org/2000/svg><path d="M12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22ZM12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20ZM11 7H13V9H11V7ZM11 11H13V17H11V11Z" fill=currentColor></path></svg></div><div class=content><p><strong>Update</strong><p>The bug described in the original post in which multiple downloads were being triggered has been resolved as of <code>v0.1.2</code>, as described below.</div></blockquote><p>By v0.1.0 WriteHeight worked mostly as expected. However, there was an annoying bug that caused multiple 3D model files to download instead of a single model.<h3 id=bug-description>Bug Description<a aria-label="Anchor link for: bug-description" class=zola-anchor href=#bug-description>#</a></h3><p>Each time a user uploaded a greyscale image a 3D model was generated on screen. If another model was subsequently loaded the previous model would <em>visually</em> disappear, which is the intended result. Then when a <code>download</code> button was clicked files for both the visible model and any previous models that had "disappeared" would be downloaded.<h3 id=bug-fix>Bug Fix<a aria-label="Anchor link for: bug-fix" class=zola-anchor href=#bug-fix>#</a></h3><p>The problem was associated with the UI texture, which included the download buttons, and how it was repainted each time a new model was generated. A button labelled <code>STL</code> would trigger the download of an .stl file. Uploading a second model repainted the UI over the existing UI. This meant that there was actually <strong>two</strong> superimposed <code>STL</code> buttons. Clicking then triggered download events associated with the first and second button, leading to the download of two models.<p>To prevent this from happening, each time a new model is loaded we need to <strong>get</strong> the extant UI, <strong>dispose</strong> of that UI and <strong>set</strong> the <code>UI</code> variable to <code>null</code>:<pre class="language-js z-code" data-lang=js><code class=language-js data-lang=js><span class="z-source z-ts"><span class="z-meta z-var z-expr z-ts"><span class="z-storage z-type z-ts">let</span> <span class="z-meta z-var-single-variable z-expr z-ts"><span class="z-meta z-definition z-variable z-ts"><span class="z-entity z-name z-function z-ts">guiCreate</span></span> </span><span class="z-keyword z-operator z-assignment z-ts">=</span><span class="z-meta z-arrow z-ts"> <span class="z-meta z-parameters z-ts"><span class="z-punctuation z-definition z-parameters z-begin z-ts">(</span><span class="z-punctuation z-definition z-parameters z-end z-ts">)</span></span> </span><span class="z-meta z-arrow z-ts"><span class="z-storage z-type z-function z-arrow z-ts">=></span> <span class="z-meta z-block z-ts"><span class="z-punctuation z-definition z-block z-ts">{</span>
    <span class="z-keyword z-control z-loop z-ts">while</span> <span class="z-meta z-brace z-round z-ts">(</span><span class="z-meta z-function-call z-ts"><span class="z-variable z-other z-object z-ts">scene</span><span class="z-punctuation z-accessor z-ts">.</span><span class="z-entity z-name z-function z-ts">getTextureByName</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-string z-quoted z-single z-ts"><span class="z-punctuation z-definition z-string z-begin z-ts">'</span>UI<span class="z-punctuation z-definition z-string z-end z-ts">'</span></span><span class="z-meta z-brace z-round z-ts">)</span><span class="z-meta z-brace z-round z-ts">)</span> <span class="z-meta z-block z-ts"><span class="z-punctuation z-definition z-block z-ts">{</span>
        <span class="z-meta z-var z-expr z-ts"><span class="z-storage z-type z-ts">let</span> <span class="z-meta z-var-single-variable z-expr z-ts"><span class="z-meta z-definition z-variable z-ts"><span class="z-variable z-other z-constant z-ts">UI</span></span> </span><span class="z-keyword z-operator z-assignment z-ts">=</span> <span class="z-meta z-function-call z-ts"><span class="z-variable z-other z-object z-ts">scene</span><span class="z-punctuation z-accessor z-ts">.</span><span class="z-entity z-name z-function z-ts">getTextureByName</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-string z-quoted z-single z-ts"><span class="z-punctuation z-definition z-string z-begin z-ts">'</span>UI<span class="z-punctuation z-definition z-string z-end z-ts">'</span></span><span class="z-meta z-brace z-round z-ts">)</span></span>
        <span class="z-meta z-function-call z-ts"><span class="z-variable z-other z-constant z-object z-ts">UI</span><span class="z-punctuation z-accessor z-ts">.</span><span class="z-entity z-name z-function z-ts">dispose</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-constant z-language z-boolean z-false z-ts">false</span><span class="z-punctuation z-separator z-comma z-ts">,</span> <span class="z-constant z-language z-boolean z-true z-ts">true</span><span class="z-meta z-brace z-round z-ts">)</span>
        <span class="z-variable z-other z-constant z-ts">UI</span> <span class="z-keyword z-operator z-assignment z-ts">=</span> <span class="z-constant z-language z-null z-ts">null</span>
    <span class="z-punctuation z-definition z-block z-ts">}</span></span>

    <span class="z-meta z-var z-expr z-ts"><span class="z-storage z-type z-ts">let</span> <span class="z-meta z-var-single-variable z-expr z-ts"><span class="z-meta z-definition z-variable z-ts"><span class="z-variable z-other z-readwrite z-ts">advancedTexture</span></span> </span><span class="z-keyword z-operator z-assignment z-ts">=</span>
        <span class="z-meta z-function-call z-ts"><span class="z-variable z-other z-constant z-object z-ts">BABYLON</span><span class="z-punctuation z-accessor z-ts">.</span><span class="z-variable z-other z-constant z-object z-property z-ts">GUI</span><span class="z-punctuation z-accessor z-ts">.</span><span class="z-variable z-other z-object z-property z-ts">AdvancedDynamicTexture</span><span class="z-punctuation z-accessor z-ts">.</span><span class="z-entity z-name z-function z-ts">CreateFullscreenUI</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-string z-quoted z-single z-ts"><span class="z-punctuation z-definition z-string z-begin z-ts">'</span>UI<span class="z-punctuation z-definition z-string z-end z-ts">'</span></span><span class="z-meta z-brace z-round z-ts">)</span></span>
<span class="z-punctuation z-whitespace z-comment z-leading z-ts">    </span><span class="z-comment z-line z-double-slash z-ts"><span class="z-punctuation z-definition z-comment z-ts">//</span></span><span class="z-comment z-line z-double-slash z-ts"> UI code here</span>
<span class="z-punctuation z-definition z-block z-ts">}</span></span></span></span>
</span></code></pre><p>With these changes the download bug has been fixed and WriteHeight is now <em>good enough</em> to again recommend as a convenient tool for creating and downloading 3D models.</article><footer><div class=copyright><p>© edibotopic | 2024</div></footer></main><aside class=blur><nav><ul><li><a class=h2 href=#making-3d-easier>Making 3D Easier</a><li><a class=h2 href=#existing-software>Existing Software</a><li><a class=h2 href=#writeheight>WriteHeight</a><li><a class=h2 href=#fixing-downloads-bug-v0-1-2>Fixing Downloads Bug (v0.1.2)</a> <ul><li><a class=h3 href=#bug-description>Bug Description</a><li><a class=h3 href=#bug-fix>Bug Fix</a></ul></ul></nav><button aria-label="back to top" id=back-to-top><svg viewbox="0 0 24 24" height=24 width=24 xmlns=http://www.w3.org/2000/svg><path d="M11.9997 10.8284L7.04996 15.7782L5.63574 14.364L11.9997 8L18.3637 14.364L16.9495 15.7782L11.9997 10.8284Z" fill=currentColor></path></svg></button></aside></div><script src=/js/lightense.min.js></script><script src=/js/main.js></script>