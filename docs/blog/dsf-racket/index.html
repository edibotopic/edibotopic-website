<!doctype html><html lang=en><head><meta charset=UTF-8><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content="light dark" name=color-scheme><title>Drawing Structures from Notation</title><meta content="<p>I created a program in the Racket programming language
to draw diagrams based on a symbolic notation that describes
the topology of physical systems.</p>
" name=description><link href=/img/favicon-32x32.png rel=icon sizes=32x32 type=image/png><link href=/img/favicon-16x16.png rel=icon sizes=16x16 type=image/png><link href=/img/apple-touch-icon.png rel=apple-touch-icon sizes=180x180><link color=#000000 href=/img/safari-pinned-tab.svg rel=mask-icon><meta content=#da532c name=msapplication-TileColor><meta content=#000000 name=theme-color><link href=https://fonts.googleapis.com rel=preconnect><link crossorigin href=https://fonts.gstatic.com rel=preconnect><link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono&family=Jost&display=swap" rel=stylesheet><link href=https://cdn.jsdelivr.net/npm/remixicon@2.5.0/fonts/remixicon.css rel=stylesheet><link href=/css/var.css rel=stylesheet><link href=/css/base.css rel=stylesheet><link href=/css/header.css rel=stylesheet><link href=/css/footer.css rel=stylesheet><link href=/css/post.css rel=stylesheet><link crossorigin href=https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.css integrity=sha384-MlJdn/WNKDGXveldHDdyRP1R4CTHr3FeuDNfhsLPYrq2t0UBkUdK2jyTnXPEK1NQ rel=stylesheet><script crossorigin defer integrity=sha384-VQ8d8WVFw0yHhCk5E8I86oOhv48xLpnDZx5T9GogA/Y84DcCKWXDmSDfn13bzFZY src=https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.js></script><script crossorigin defer integrity=sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR src=https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/contrib/auto-render.min.js></script><script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:'$$',right:'$$',display:true},{left:'$',right:'$',display:false},{left:'\\(',right:'\\)',display:false},{left:'\\[',right:'\\]',display:true}],throwOnError:false})})</script><body><script>if(localStorage.getItem('theme')=='dark'){document.body.classList.add('dark-mode')}</script><header class=blur><div class=top><a class="header blog" href=/blog><i class="ri-quill-pen-line ri-2x"></i><span>Blog</span></a><a class=back href=/><i class="ri-arrow-left-s-line ri-1x"></i><span>Home</span></a><div class=icon><a aria-label=home href=/ id=go-home><i class="ri-home-6-line ri-xl"></i></a><a aria-label="rss feed" href=/blog/feed.xml><i class="ri-rss-line ri-xl"></i></a><button aria-label="dark light mode switch" id=color-toggle><i class="ri-moon-line ri-xl"></i></button><button aria-label="table of content" id=toc-toggle><i class="ri-menu-2-line ri-xl"></i></button></div></div><div id=progress-bar></div></header><div class=wrap><div class=blank></div><main><div id=top></div><article><h1>Drawing Structures from Notation</h1><div id=post-info><div class=date><span id=publish>2023-07-16</span></div><div class=tags><a class=tag href=https://edibotopic.com/tags/science><i class="ri-hashtag ri-sm"></i><span>science</span></a><a class=tag href=https://edibotopic.com/tags/programming><i class="ri-hashtag ri-sm"></i><span>programming</span></a><a class=tag href=https://edibotopic.com/tags/teaching><i class="ri-hashtag ri-sm"></i><span>teaching</span></a><a class=tag href=https://edibotopic.com/tags/spatial-logic><i class="ri-hashtag ri-sm"></i><span>spatial logic</span></a></div></div><p>I created a program in the Racket programming language to draw diagrams based on a symbolic notation that describes the topology of physical systems.</p><span id=continue-reading></span><h1 id=background>Background</h1><h2 id=dispersed-systems>Dispersed Systems</h2><p>A lot of science and engineering concerns <em>dispersed systems</em>. In this context, <strong>system</strong> relates to there being many parts comprising the whole. <strong>Dispersed</strong> refers to sets of parts that are distributed randomly in space, usually in large number.<p>Important materials are often <strong>dispersions</strong>, in which there is one set of parts dispersed in a continuous matrix. These include liquid foams (e.g., gas bubbles in water), emulsions (e.g., oil droplets in water) and gels (e.g., water droplets in solid).<p>These dispersion often have characteristic qualities that are useful to us. In food, emulsions can simultaneously carry water- and oil-soluble nutrients, and opacity is generated by the thousands of oil droplets scattering light. Dispersions like emulsions and suspensions are also <a rel="nofollow noreferrer" href=https://edibotopic.github.io/stokes-law/>intrinsically unstable</a>, separating over time depending on properties like particle size and solvent viscosity.<h2 id=dsf-formalism>DSF Formalism</h2><p>Talking about dispersed systems can get difficult quickly. This is because many of them contain sub-systems with their own distinct topologies. At one level, bread crumb is a solid foam, with gas bubbles dispersed in a solid matrix. Zooming out, this foam is enclosed in a solid crust. Zooming back in, the solid matrix is itself a dispersion of starch granules. The following is a mouthful:<blockquote><p>A dispersion of bubbles in a dispersion of starch granules enclosed in a solid container</blockquote><p>For this reason, the Dispersed System Formalism (DSF) was invented by the French scientist <a rel="nofollow noreferrer" href=https://en.wikipedia.org/wiki/Herv%C3%A9_This>Hervé This</a>.<p>For decades scientists have referred to oil-in-water emulsions using the following notation:<p>$$O/W$$<p>The letters refer to physical phases — <em>O</em>(il) and <em>W</em>(ater) — and the forward slash refers to the relation <em>dispersed in</em>. In most cases, DSF simply extends this notation to encompass a broader class of phases and larger set of relations. Obviously, a liquid foam could be represented as:<p>$$G/W$$<p>If a foam is enclosed in a solid we need an additional character for S(olid) and an additional operator for enclosure (@):<p>$$(G/W)@S$$<p>The apparatus of DSF has further intricacies, elaborated in <a rel="nofollow noreferrer" href=https://pubmed.ncbi.nlm.nih.gov/17875375/>academic papers</a> Prof This has written on the topic. For now, this is enough to get started.<h1 id=dsf-racket>DSF-racket</h1><p><a rel="nofollow noreferrer" href=https://github.com/edibotopic/dsf-racket>DSF-racket</a> is a racket module (more correctly: two modules) that can be imported into racket projects. It allows diagrams to be drawn using DSF notation with <code>dsf.rkt</code> and tree representations of DSF structures to be drawn with <code>tree.rkt</code>.<h2 id=motivation>Motivation</h2><p>When DSF notation is used it is often necessary to include diagrams. People might not be familiar with the notation and visualisation helps. This is also common in similar fields like spatial logic, mereotopology and formal ontology. Philosophers, ontologists and computer scientists in these areas rely on symbolic tools like formal logic and set theory to represent space, but their papers are also filled with explanatory diagrams.<p>It seems to me that a tighter coupling between the symbolic and diagrammatic representations could be fruitful for three reasons:<ol><li><p>It reduces the workload on the communicator, as diagrams do not have to be created separately from the notation.</p><li><p>It creates a learning tool, as manipulation of the symbols generates diagrams as feedback for the learner.</p><li><p>It ensures consistency, as two individuals writing the same notation should always generated an equivalent diagram.</p></ol><h2 id=how-it-works>How it Works</h2><h3 id=symbolising-regions-of-space>Symbolising Regions of Space</h3><p>The <a rel="nofollow noreferrer" href=https://racket-lang.org/>Racket language</a>, like most <a rel="nofollow noreferrer" href=https://www.britannica.com/technology/LISP-computer-language>Lisp</a> dialects, uses prefix notation. Instead of writing the expression <code>2 + 3</code> to get the value <code>5</code>, we write:<pre class=language-rkt data-lang=rkt style=background:#282a36;color:#f8f8f2><code class=language-rkt data-lang=rkt><span>(+ </span><span style=color:#bd93f9>2 3</span><span>)
</span></code></pre><p>Individual expressions are wrapped in parentheses.<p>In DSF, <code>O+W</code> means effectively:<blockquote><p>Take oil and take water</blockquote><p>or<blockquote><p>The mixture of oil and water</blockquote><p>Topologically, it means that the two phases are disconnected from each other in the system. Here and a few other replaces I deviate from the DSF notation slightly, preferring the symbol $:$ to signify disconnection:<pre class=language-rkt data-lang=rkt style=background:#282a36;color:#f8f8f2><code class=language-rkt data-lang=rkt><span>(: o w)
</span></code></pre><p>If <code>(+ 2 3)</code> returns <code>5</code> what does <code>(: o w)</code> do? It draws a diagram showing two circles with different colours that are disconnected.<p><img src="https://github.com/edibotopic/dsf-racket/blob/master/out/mixture.png?raw=true" title="mixture (: o w)" alt=Mixture><p>To enclose the structure in a solid:<pre class=language-rkt data-lang=rkt style=background:#282a36;color:#f8f8f2><code class=language-rkt data-lang=rkt><span>(@ (: o w) S)
</span></code></pre><p>If you are unfamiliar with prefix notation this might seem confusing, but it is not that difficult. Taking the inner-most parentheses, we have:<blockquote><p>(mix oil with water)</blockquote><p>The $@$ takes this mixture and encloses it in a container (signified by capital letter):<blockquote><p>(enclose (mix oil with water) in Solid)</blockquote><p>Again, this yields a diagram representing the structure:<p><img src="https://github.com/edibotopic/dsf-racket/blob/master/out/mix-enclose.png?raw=true" title="Enclosed mixture (@ (: o w) S)" alt=Enclose><h3 id=processes-as-trees>Processes as Trees</h3><p>One of the advantages of prefix notation is that it closely maps to a tree-like representation. The previous example of <code>(@ (: o w) S)</code> can be thought of as a process, consisting of nodes and connections between those nodes. Starting at the bottom of the tree, we would have nodes for oil (o) and water (w) which together connect to a mix node (:). This mix node then connects with the S(olid) container through an enclosure node (@).<p>A function is included in DSF-racket to draw such trees from notation. A structure can be stored as a list in a variable and then fed into the draw function:<pre class=language-rkt data-lang=rkt style=background:#282a36;color:#f8f8f2><code class=language-rkt data-lang=rkt><span>(</span><span style=color:#ff79c6>define </span><span>myStructure '(@ (: o w) S)) </span><span style=color:#6272a4>;; store in variable
</span><span>(draw-tree myStructure) </span><span style=color:#6272a4>;; call the draw function
</span></code></pre><p><img src="https://github.com/edibotopic/dsf-racket/blob/master/out/tree-example.png?raw=true" title="Tree (@ (: o w) S)" alt=Tree><p>This can be especially useful when interpreting complex symbolic/diagrammatic representations, such as the following:<pre class=language-rkt data-lang=rkt style=background:#282a36;color:#f8f8f2><code class=language-rkt data-lang=rkt><span>(: s (@ (@ (: o (& w g)) S) S))
</span></code></pre><p><img src="https://github.com/edibotopic/dsf-racket/blob/master/out/complex.png?raw=true" title="Complex example ((: s (@ (@ (: o (& w g)) S) S)))" alt=Complex><h3 id=conceptual-aside-dispersion>Conceptual Aside: Dispersion</h3><p>What is dispersion? It is a discrete set of particles in an enclosing container. What is dispersed is by definition a multiplicity: there has to be at least two regions of that material that are mutually disconnected from each other.<p>This means that to define and draw a dispersion we just need the $:$ and $@$ operators. For example, an emulsion of oil droplets in water is:<pre class=language-rkt data-lang=rkt style=background:#282a36;color:#f8f8f2><code class=language-rkt data-lang=rkt><span>(@ (: o o) W)
</span></code></pre><p><img src="https://github.com/edibotopic/dsf-racket/blob/master/out/emulsion.png?raw=true" title="Emulsion (@ (: o o) W)" alt=Emulsion><p>Of course, many emulsions physically consist of thousands of oil droplets. We do not, however, need to represent thousands (or even three) droplets because the critical distinction is that between the continuous (one) and the discrete (two or more).<h3 id=operators-in-dsf-racket>Operators in DSF-racket</h3><p>Currently the following operators are defined (as functions):<table><thead><tr><th style=text-align:center>Symbol<th style=text-align:center>Alias<tbody><tr><td style=text-align:center>:<td style=text-align:center>mix<tr><td style=text-align:center>σ<td style=text-align:center>connect<tr><td style=text-align:center>@<td style=text-align:center>enclose<tr><td style=text-align:center>&<td style=text-align:center>overlap<tr><td style=text-align:center>^<td style=text-align:center>m-connect</table><p>Aliases are provided for more explicit formula definitions.<pre class=language-rkt data-lang=rkt style=background:#282a36;color:#f8f8f2><code class=language-rkt data-lang=rkt><span>(equal? (mix oil gas) (: o g)) </span><span style=color:#6272a4>;; #t
</span></code></pre><h4 id=binary>Binary</h4><p>The operations briefly defined:<ol><li>Mix (<code>: x y</code>) — x is disconnected from y<li>Connect (<code>σ x y</code>) — x is externally connected from y<li>Enclose (<code>@ x Y</code>) — x is enclose in a container y<li>Overlap (<code>& x y</code>) — x overlaps with y</ol><h4 id=ternary>Ternary</h4><p>The idea of M(ediate)-connection was mentioned in Whitehead's <a rel="nofollow noreferrer" href=https://archive.org/details/AlfredNorthWhiteheadProcessAndReality>Process & Reality</a>.<ol start=5><li>M-connect (<code>^ x y z</code>): x is connected to y through z</ol><h3 id=primitives>Primitives</h3><h4 id=atoms>Atoms</h4><table><thead><tr><th style=text-align:center>Symbol<th style=text-align:center>Alias<tbody><tr><td style=text-align:center>g<td style=text-align:center>gas<tr><td style=text-align:center>o<td style=text-align:center>oil<tr><td style=text-align:center>s<td style=text-align:center>solid<tr><td style=text-align:center>w<td style=text-align:center>water</table><h4 id=containers>Containers</h4><table><thead><tr><th style=text-align:center>Symbol<th style=text-align:center>Alias<tbody><tr><td style=text-align:center>G<td style=text-align:center>Gas<tr><td style=text-align:center>O<td style=text-align:center>Oil<tr><td style=text-align:center>S<td style=text-align:center>Solid<tr><td style=text-align:center>W<td style=text-align:center>Water</table><h2 id=infix-notation>Infix Notation</h2><p>Racket supports a (somewhat verbose) form of infix notation. This involves the use of periods between an operation and its arguments:<pre class=language-rkt data-lang=rkt style=background:#282a36;color:#f8f8f2><code class=language-rkt data-lang=rkt><span>(equal? (mix o g) (o . mix . g)) </span><span style=color:#6272a4>;; #t
</span></code></pre><h1 id=why-racket>Why Racket?</h1><h2 id=rapid-prototyping>Rapid Prototyping</h2><p>I don't have much experience with Racket or Lisp. Despite this, I found it remarkably simple to get this project functioning in a single afternoon.<p>Racket installs with an IDE called DrRacket and several built-in libraries. Writing the following into the editor is sufficient to generate an image of a circle:<pre class=language-rkt data-lang=rkt style=background:#282a36;color:#f8f8f2><code class=language-rkt data-lang=rkt><span>#lang racket </span><span style=color:#6272a4>;;specify the language being used
</span><span>(</span><span style=color:#ff79c6>require </span><span>2htdp/image) </span><span style=color:#6272a4>;;use a built-in image library
</span><span>(circle </span><span style=color:#bd93f9>20 </span><span style=color:#f1fa8c>"solid" "red"</span><span>) </span><span style=color:#6272a4>;;circle with 20 px radius and solid red fill
</span></code></pre><p>I've played around a lot with programmatic graphics, and this is easily one of the quickest ways to get up and running. DrRacket has a REPL in the editor, making it convenient to quickly test any graphics that you define. There is an <a rel="nofollow noreferrer" href=https://docs.racket-lang.org/quick/index.html>excellent tutorial</a> for beginners that introduces basic programming concepts using Racket with pictures.<p>Early on, I opened a REPL and did something like this:<pre class=language-rkt data-lang=rkt style=background:#282a36;color:#f8f8f2><code class=language-rkt data-lang=rkt><span>(</span><span style=color:#ff79c6>define </span><span>thing (circle </span><span style=color:#bd93f9>20 </span><span style=color:#f1fa8c>"solid" "red"</span><span>))
</span><span>(</span><span style=color:#ff79c6>define </span><span>otherThing (circle </span><span style=color:#bd93f9>20 </span><span style=color:#f1fa8c>"solid" "blue"</span><span>))
</span><span>(beside thing otherThing)
</span></code></pre><p>The <code>beside</code> function from <code>2htdp/image</code> puts two shapes — as you might suspect — beside each other. In this case, the shapes <strong>connect</strong> (σ) at their boundary.<pre class=language-rkt data-lang=rkt style=background:#282a36;color:#f8f8f2><code class=language-rkt data-lang=rkt><span>(</span><span style=color:#ff79c6>define </span><span>σ x y
</span><span>   (beside x y))
</span></code></pre><p>It got a little more complicated than this, but that was the basic idea.<h2 id=easy-distribution>Easy Distribution</h2><p>Sharing a Racket program is not as convenient as sending a link to a web app, but it is compatible with different user environments.<p>It is trivial to use the DSF module if you have racket installed. After a <code>git clone</code> of the repository, the <code>dsf</code> folder can be copied to a racket project and then imported:<pre class=language-rkt data-lang=rkt style=background:#282a36;color:#f8f8f2><code class=language-rkt data-lang=rkt><span>(</span><span style=color:#ff79c6>require </span><span>"dsf/base.rkt")
</span><span>
</span><span>(@ w S) </span><span style=color:#6272a4>;; will draw a diagram
</span></code></pre><p>If you are not using DrRacket then Emacs with Racket Mode installed/activated is a straight replacement.<p>Using the terminal or (Neo)Vim requires more work to preview images as you code.<p>Start a REPL in your terminal with:<pre class=language-bash data-lang=bash style=background:#282a36;color:#f8f8f2><code class=language-bash data-lang=bash><span style=color:#50fa7b>racket
</span></code></pre><p>To draw some diagrams you will need <code>dsf/base.rkt</code> and to render them to a frame you will need <code>racket/gui/base</code> and <code>pict</code>. Require them in the REPL:<pre class=language-rkt data-lang=rkt style=background:#282a36;color:#f8f8f2><code class=language-rkt data-lang=rkt><span>(</span><span style=color:#ff79c6>require </span><span>"dsf/base.rkt")
</span><span>(</span><span style=color:#ff79c6>require </span><span>racket/gui/base pict)
</span></code></pre><p>Now, entering the below code in the REPL will define a DSF formula and render the diagram in a separate frame:<pre class=language-rkt data-lang=rkt style=background:#282a36;color:#f8f8f2><code class=language-rkt data-lang=rkt><span>(</span><span style=color:#ff79c6>define </span><span>myStructure (@ (@ (σ w o) S) W))
</span><span>
</span><span>(show-pict myStructure)
</span></code></pre><p>Lastly, there is a <a rel="nofollow noreferrer" href=https://github.com/rmculpepper/iracket>Jupyter kernel for Racket</a> — IRacket — that can be used to run Racket code in a Jupyter notebook.<p>If you have Jupyter and IRacket installed then DSF modules can be required as described previously and used to draw diagrams. Make sure that the kernel is set to Racket in your Jupyter instance.<p>Examples of how the module can be used in <a rel="nofollow noreferrer" href=https://github.com/edibotopic/dsf-racket/tree/master/docs>slide presentations (via Racket)</a> and <a rel="nofollow noreferrer" href=https://github.com/edibotopic/dsf-racket/tree/master/nb>notebooks (via Jupyter)</a> are included in the repo.<h1 id=next-steps>Next Steps</h1><p>I have been fascinated with the general area of representing space (or more abstract <em>regions</em>) using symbolic languages for several years.<p>There are many people in disparate fields working on such problems, and I have been privately trying to connect ideas across these fields for some time.<p>DSF-racket is primarily focused on coupling symbolic and diagrammatic representations. I would like to extend the systems it can represent and to improve the quality of its diagrams, but it is largely feature-complete.<p>This post really only touches the surface on my thoughts on these formalisms, and I will likely revisit the area in the future.</article></main><aside class=blur><nav><ul><li><a class=toc-h2 href=#background>Background</a> <ul><li><a class=toc-h3 href=#dispersed-systems>Dispersed Systems</a><li><a class=toc-h3 href=#dsf-formalism>DSF Formalism</a></ul><li><a class=toc-h2 href=#dsf-racket>DSF-racket</a> <ul><li><a class=toc-h3 href=#motivation>Motivation</a><li><a class=toc-h3 href=#how-it-works>How it Works</a><li><a class=toc-h3 href=#infix-notation>Infix Notation</a></ul><li><a class=toc-h2 href=#why-racket>Why Racket?</a> <ul><li><a class=toc-h3 href=#rapid-prototyping>Rapid Prototyping</a><li><a class=toc-h3 href=#easy-distribution>Easy Distribution</a></ul><li><a class=toc-h2 href=#next-steps>Next Steps</a></ul></nav><a aria-label="back to top" href=#top id=back-to-top><i class="ri-arrow-up-s-line ri-2x"></i></a></aside></div><footer><div class=copyright>Copyright © 2023 edibotopic.</div></footer><script src=/js/dark.js></script><script src=/js/toc.js></script><script src=/js/progress.js></script><script src=/js/lightense.min.js></script><script src=/js/img.js></script>